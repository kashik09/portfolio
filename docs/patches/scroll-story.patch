From 323242af8d4e97f4e2f4d51f8e01f0b31d8199d6 Mon Sep 17 00:00:00 2001
From: kashik09 <kashiku789@gmail.com>
Date: Thu, 25 Dec 2025 21:10:17 +0300
Subject: [PATCH] feat: add scroll-story landing flow

---
 app/(main)/page.tsx                  | 198 +++++++++++++--------------
 components/home/FeaturedWorkFlow.tsx | 123 +++++++++++++++++
 components/home/HowIThink.tsx        |  52 +++++++
 components/home/ProofSnapshot.tsx    |  29 ++++
 components/layout/Container.tsx      |  15 ++
 components/layout/Section.tsx        |  16 +++
 components/motion/StoryReveal.tsx    |  75 ++++++++++
 7 files changed, 404 insertions(+), 104 deletions(-)
 create mode 100644 components/home/FeaturedWorkFlow.tsx
 create mode 100644 components/home/HowIThink.tsx
 create mode 100644 components/home/ProofSnapshot.tsx
 create mode 100644 components/layout/Container.tsx
 create mode 100644 components/layout/Section.tsx
 create mode 100644 components/motion/StoryReveal.tsx

diff --git a/app/(main)/page.tsx b/app/(main)/page.tsx
index 20aaaeb..35a2548 100644
--- a/app/(main)/page.tsx
+++ b/app/(main)/page.tsx
@@ -1,14 +1,17 @@
 export const dynamic = 'force-dynamic'
 
 import Link from 'next/link'
-import { Button } from '@/components/ui/Button'
 import { ArrowRight } from 'lucide-react'
 import { AdSlot } from '@/components/AdSlot'
-import { FeaturedProjectsList } from '@/components/FeaturedProjects'
 import { ProjectCardData } from '@/components/ProjectCard'
 import { prisma } from '@/lib/prisma'
 import { MemberHomeTop } from '@/components/home/MemberHomeTop'
-import { HeroSwitch } from '@/components/home/HeroSwitch'
+import { ProofSnapshot } from '@/components/home/ProofSnapshot'
+import { FeaturedWorkFlow } from '@/components/home/FeaturedWorkFlow'
+import { HowIThink } from '@/components/home/HowIThink'
+import { Container } from '@/components/layout/Container'
+import { Section } from '@/components/layout/Section'
+import { Button } from '@/components/ui/Button'
 
 async function getLandingContent() {
   try {
@@ -67,119 +70,106 @@ export default async function HomePage() {
   const landingContent = await getLandingContent()
 
   // Fallback to hardcoded if CMS content not available
-  const hero = landingContent?.hero || {
-    title: 'hey, i\'m',
-    highlight: 'kashi',
-    subtitle: 'i notice things that could work better, then i build them',
-    primaryCtaLabel: 'see what i\'ve built',
+  const primaryLabel =
+    landingContent?.hero?.primaryCtaHref === '/projects'
+      ? landingContent?.hero?.primaryCtaLabel
+      : undefined
+  const secondaryLabel =
+    landingContent?.hero?.secondaryCtaHref === '/products'
+      ? landingContent?.hero?.secondaryCtaLabel
+      : undefined
+
+  const hero = {
+    title: landingContent?.hero?.title || 'hey, i\'m',
+    highlight: landingContent?.hero?.highlight || 'kashi',
+    subtitle: landingContent?.hero?.subtitle || 'i notice friction, then i build fixes',
+    primaryCtaLabel: primaryLabel || 'view projects',
     primaryCtaHref: '/projects',
-    secondaryCtaLabel: 'get in touch',
-    secondaryCtaHref: '/contact'
+    secondaryCtaLabel: secondaryLabel || 'products',
+    secondaryCtaHref: '/products'
   }
 
-  const proofSnapshot = landingContent?.proofSnapshot || [
-    { id: '1', text: 'this site is fully custom-built (no templates)' },
-    { id: '2', text: 'mode-based theming system with 5+ variants' },
-    { id: '3', text: 'cms-driven content + full e-commerce' },
-    { id: '4', text: 'designed + built end-to-end' }
-  ]
-
-  const philosophy = landingContent?.philosophy || [
-    { id: '1', title: 'notice', description: 'i pay attention to friction. when something feels harder than it should, that\'s a signal.' },
-    { id: '2', title: 'build', description: 'ideas don\'t count until they\'re real. i ship working code, not concepts.' },
-    { id: '3', title: 'iterate', description: 'first version ships. then i learn what actually matters and improve it.' }
-  ]
-
-  const cta = landingContent?.cta || {
-    text: 'view all projects',
-    href: '/projects'
+  const ctaHref = landingContent?.cta?.href
+  const cta = {
+    text: landingContent?.cta?.text || 'view all projects',
+    href: ctaHref === '/projects' || ctaHref === '/products' ? ctaHref : '/projects'
   }
 
   return (
     <div style={{ paddingTop: 'var(--space-block)', paddingBottom: 'var(--space-section)' }}>
-      <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-section)' }}>
-        {/* Member Dashboard Strip */}
-        <MemberHomeTop />
-
-        {/* 1. HERO */}
-        <div className="container-lg">
-          <HeroSwitch
-            title={hero.title}
-            highlight={hero.highlight}
-            subtitle={hero.subtitle}
-            primaryCtaLabel={hero.primaryCtaLabel}
-            primaryCtaHref={hero.primaryCtaHref}
-            secondaryCtaLabel={hero.secondaryCtaLabel}
-            secondaryCtaHref={hero.secondaryCtaHref}
-          />
-        </div>
-
-        {/* Ad slot */}
-        <div className="container-lg">
-          <AdSlot placement="homepage_hero" />
-        </div>
-
-        {/* 2. PROOF SNAPSHOT */}
-        <section className="container-md">
-          <div className="relative border-l-2 border-primary/20 pl-4 sm:pl-6 space-y-2">
-            {proofSnapshot.map((item: any) => (
-              <div key={item.id} className="flex items-start gap-2">
-                <span className="text-primary/40 text-xs font-mono mt-0.5 select-none">→</span>
-                <p className="text-sm sm:text-base text-muted-foreground/90 leading-relaxed">
-                  {item.text}
-                </p>
-              </div>
-            ))}
-          </div>
-        </section>
-
-        {/* 3. FEATURED PROJECTS */}
-        {featuredProjects.length > 0 && (
-          <section className="container-lg">
-            <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-block)' }}>
-              <div>
-                <h2 className="text-h2 font-bold text-foreground mb-2">selected work</h2>
-                <p className="text-body text-muted-foreground">
-                  what it is • why it exists • what it proves
-                </p>
+      {/* Member Dashboard Strip */}
+      <MemberHomeTop />
+
+      {/* 1. HERO */}
+      <Section className="pt-16 md:pt-20">
+        <Container>
+          <div className="relative overflow-hidden rounded-3xl border border-app bg-gradient-to-br from-primary/10 via-transparent to-primary/30 px-6 py-12 sm:px-10">
+            <div className="absolute -top-20 right-0 h-56 w-56 rounded-full bg-primary/20 blur-3xl" />
+            <div className="absolute -bottom-24 left-0 h-72 w-72 rounded-full bg-primary/10 blur-3xl" />
+
+            <div className="relative z-10 space-y-6">
+              <p className="text-xs uppercase tracking-[0.35em] text-muted-app">
+                scroll as story
+              </p>
+              <h1 className="text-3xl font-semibold leading-tight text-app sm:text-4xl md:text-5xl">
+                {hero.title} <span className="accent">{hero.highlight}</span>
+              </h1>
+              <p className="max-w-prose text-base leading-relaxed text-muted-app sm:text-lg">
+                {hero.subtitle}
+              </p>
+              <div className="flex flex-wrap gap-3">
+                <Link href={hero.primaryCtaHref} className="no-underline">
+                  <Button
+                    variant="primary"
+                    size="md"
+                    icon={<ArrowRight size={18} />}
+                    iconPosition="right"
+                  >
+                    {hero.primaryCtaLabel}
+                  </Button>
+                </Link>
+                <Link href={hero.secondaryCtaHref} className="no-underline">
+                  <Button variant="outline" size="md">
+                    {hero.secondaryCtaLabel}
+                  </Button>
+                </Link>
               </div>
-              <FeaturedProjectsList projects={featuredProjects} />
-            </div>
-          </section>
-        )}
-
-        {/* 4. HOW I WORK */}
-        <section className="container-md">
-          <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-item)' }}>
-            <h2 className="text-h2 font-bold text-foreground">how i work</h2>
-            <div className="grid gap-4 sm:gap-6">
-              {philosophy.map((item: any) => (
-                <div key={item.id} className="group">
-                  <h3 className="text-h3 font-semibold text-foreground mb-1.5 group-hover:text-primary transition-colors">
-                    {item.title}
-                  </h3>
-                  <p className="text-body text-muted-foreground/90 leading-relaxed">
-                    {item.description}
-                  </p>
-                </div>
-              ))}
             </div>
           </div>
-        </section>
-
-        {/* 5. CTA */}
-        <section className="container-lg">
-          <div className="border-t border-border/50 pt-8 sm:pt-12 text-center">
-            <Link
-              href={cta.href}
-              className="inline-flex items-center gap-2 text-foreground/80 hover:text-primary transition-all group text-sm sm:text-base"
-            >
-              <span>{cta.text}</span>
-              <ArrowRight size={16} className="group-hover:translate-x-0.5 transition-transform" />
+
+          <div className="mt-6">
+            <AdSlot placement="homepage_hero" />
+          </div>
+        </Container>
+      </Section>
+
+      {/* 2. PROOF SNAPSHOT */}
+      <ProofSnapshot />
+
+      {/* 3. FEATURED PROJECTS */}
+      {featuredProjects.length > 0 && (
+        <FeaturedWorkFlow projects={featuredProjects} />
+      )}
+
+      {/* 4. HOW I THINK */}
+      <HowIThink />
+
+      {/* 5. CTA */}
+      <Section className="pt-0">
+        <Container>
+          <div className="border-t border-border/50 pt-6 text-center sm:pt-8">
+            <Link href={cta.href} className="no-underline">
+              <Button
+                variant="ghost"
+                size="sm"
+                className="text-xs uppercase tracking-[0.2em] text-foreground/80"
+              >
+                {cta.text}
+              </Button>
             </Link>
           </div>
-        </section>
-      </div>
+        </Container>
+      </Section>
     </div>
   )
 }
diff --git a/components/home/FeaturedWorkFlow.tsx b/components/home/FeaturedWorkFlow.tsx
new file mode 100644
index 0000000..ffc5e02
--- /dev/null
+++ b/components/home/FeaturedWorkFlow.tsx
@@ -0,0 +1,123 @@
+import Link from 'next/link'
+import { ArrowDown, ArrowRight } from 'lucide-react'
+import { ProjectCardData } from '@/components/ProjectCard'
+import { Container } from '@/components/layout/Container'
+import { Section } from '@/components/layout/Section'
+import { StoryReveal } from '@/components/motion/StoryReveal'
+import { truncate } from '@/lib/utils'
+
+interface FeaturedWorkFlowProps {
+  projects: ProjectCardData[]
+}
+
+function getFocusLine(project: ProjectCardData) {
+  if (project.category) return project.category
+  if (project.technologies && project.technologies.length > 0) {
+    return project.technologies.slice(0, 2).join(' + ')
+  }
+  return 'product build'
+}
+
+function getProofLine(project: ProjectCardData) {
+  if (project.technologies && project.technologies.length > 0) {
+    return project.technologies.slice(0, 3).join(' / ')
+  }
+  return 'published work'
+}
+
+export function FeaturedWorkFlow({ projects }: FeaturedWorkFlowProps) {
+  const chapters = projects.slice(0, 5)
+
+  if (chapters.length === 0) return null
+
+  return (
+    <Section id="work">
+      <Container>
+        <div className="space-y-8">
+          <header className="space-y-3">
+            <p className="text-xs uppercase tracking-[0.35em] text-muted-foreground">
+              featured work
+            </p>
+            <h2 className="text-3xl font-semibold text-foreground sm:text-4xl">
+              one project per beat
+            </h2>
+            <p className="max-w-prose text-base leading-relaxed text-muted-foreground">
+              a scroll story of the builds that matter most.
+            </p>
+          </header>
+
+          <div className="space-y-12 md:space-y-16">
+            {chapters.map((project, index) => (
+              <div key={project.id}>
+                <StoryReveal
+                  as="article"
+                  delayMs={index * 60}
+                  className="rounded-2xl border border-border/60 bg-card/40 p-6 sm:p-8"
+                >
+                  <div className="space-y-5">
+                    <div className="flex items-center gap-3 text-xs uppercase tracking-[0.3em] text-muted-foreground">
+                      <span>chapter {index + 1}</span>
+                    </div>
+                    <h3 className="text-2xl font-semibold text-foreground sm:text-3xl">
+                      {project.title}
+                    </h3>
+
+                    <dl className="space-y-3">
+                      <div className="grid gap-2 sm:grid-cols-[5rem_1fr]">
+                        <dt className="text-xs uppercase tracking-[0.2em] text-muted-foreground">
+                          what
+                        </dt>
+                        <dd className="text-sm leading-relaxed text-foreground/90 sm:text-base">
+                          {project.description
+                            ? truncate(project.description, 120)
+                            : 'case study + build details'}
+                        </dd>
+                      </div>
+                      <div className="grid gap-2 sm:grid-cols-[5rem_1fr]">
+                        <dt className="text-xs uppercase tracking-[0.2em] text-muted-foreground">
+                          focus
+                        </dt>
+                        <dd className="text-sm leading-relaxed text-foreground/90 sm:text-base">
+                          {getFocusLine(project)}
+                        </dd>
+                      </div>
+                      <div className="grid gap-2 sm:grid-cols-[5rem_1fr]">
+                        <dt className="text-xs uppercase tracking-[0.2em] text-muted-foreground">
+                          proves
+                        </dt>
+                        <dd className="text-sm leading-relaxed text-foreground/90 sm:text-base">
+                          {getProofLine(project)}
+                        </dd>
+                      </div>
+                    </dl>
+
+                    <Link
+                      href={`/projects/${project.slug}`}
+                      className="inline-flex items-center gap-2 rounded-full border border-border/60 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-foreground/80 transition hover:border-primary/40 hover:text-foreground"
+                    >
+                      open project
+                      <ArrowRight size={12} />
+                    </Link>
+
+                    {index < chapters.length - 1 && (
+                      <div className="flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-muted-foreground">
+                        <span>next</span>
+                        <ArrowDown size={12} />
+                      </div>
+                    )}
+                  </div>
+                </StoryReveal>
+
+                {index < chapters.length - 1 && (
+                  <div className="flex justify-center pt-8">
+                    <div className="h-10 w-px bg-gradient-to-b from-border/60 via-primary/30 to-border/60" />
+                  </div>
+                )}
+              </div>
+            ))}
+          </div>
+        </div>
+      </Container>
+    </Section>
+  )
+}
diff --git a/components/home/HowIThink.tsx b/components/home/HowIThink.tsx
new file mode 100644
index 0000000..eda98e8
--- /dev/null
+++ b/components/home/HowIThink.tsx
@@ -0,0 +1,52 @@
+import { Container } from '@/components/layout/Container'
+import { Section } from '@/components/layout/Section'
+
+const principles = [
+  {
+    title: 'notice friction',
+    description: 'if something feels slow or unclear, that is the signal to simplify.'
+  },
+  {
+    title: 'shape the flow',
+    description: 'i map the path from first glance to finished action and cut the noise.'
+  },
+  {
+    title: 'ship in beats',
+    description: 'small releases keep momentum high and feedback honest.'
+  },
+  {
+    title: 'keep it calm',
+    description: 'clean structure and readable interfaces make the work feel effortless.'
+  }
+]
+
+export function HowIThink() {
+  return (
+    <Section id="thinking">
+      <Container>
+        <div className="space-y-6">
+          <div className="space-y-3">
+            <p className="text-xs uppercase tracking-[0.35em] text-muted-foreground">
+              how i think
+            </p>
+            <h2 className="text-3xl font-semibold text-foreground sm:text-4xl">
+              a calm build philosophy
+            </h2>
+          </div>
+          <div className="grid gap-4 sm:grid-cols-2">
+            {principles.map((item) => (
+              <div key={item.title} className="rounded-2xl border border-border/60 bg-card/30 p-5">
+                <h3 className="text-sm font-semibold uppercase tracking-[0.2em] text-foreground">
+                  {item.title}
+                </h3>
+                <p className="mt-2 text-sm leading-relaxed text-muted-foreground">
+                  {item.description}
+                </p>
+              </div>
+            ))}
+          </div>
+        </div>
+      </Container>
+    </Section>
+  )
+}
diff --git a/components/home/ProofSnapshot.tsx b/components/home/ProofSnapshot.tsx
new file mode 100644
index 0000000..74eedfc
--- /dev/null
+++ b/components/home/ProofSnapshot.tsx
@@ -0,0 +1,29 @@
+import { Container } from '@/components/layout/Container'
+import { Section } from '@/components/layout/Section'
+
+const proofItems = [
+  'custom-built (no templates)',
+  'component-driven ui',
+  'json-based cms content',
+  'designed + built end-to-end',
+  'mobile-first responsive'
+]
+
+export function ProofSnapshot() {
+  return (
+    <Section id="proof">
+      <Container>
+        <div className="flex flex-wrap gap-2">
+          {proofItems.map((item) => (
+            <span
+              key={item}
+              className="rounded-full border border-border/60 bg-card/50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground"
+            >
+              {item}
+            </span>
+          ))}
+        </div>
+      </Container>
+    </Section>
+  )
+}
diff --git a/components/layout/Container.tsx b/components/layout/Container.tsx
new file mode 100644
index 0000000..0e8c3ab
--- /dev/null
+++ b/components/layout/Container.tsx
@@ -0,0 +1,15 @@
+import { ReactNode } from 'react'
+import { cn } from '@/lib/utils'
+
+interface ContainerProps {
+  children: ReactNode
+  className?: string
+}
+
+export function Container({ children, className }: ContainerProps) {
+  return (
+    <div className={cn('mx-auto w-full max-w-[64rem] px-4 sm:px-6', className)}>
+      {children}
+    </div>
+  )
+}
diff --git a/components/layout/Section.tsx b/components/layout/Section.tsx
new file mode 100644
index 0000000..90da466
--- /dev/null
+++ b/components/layout/Section.tsx
@@ -0,0 +1,16 @@
+import { ReactNode } from 'react'
+import { cn } from '@/lib/utils'
+
+interface SectionProps {
+  children: ReactNode
+  className?: string
+  id?: string
+}
+
+export function Section({ children, className, id }: SectionProps) {
+  return (
+    <section id={id} className={cn('py-12 md:py-16', className)}>
+      {children}
+    </section>
+  )
+}
diff --git a/components/motion/StoryReveal.tsx b/components/motion/StoryReveal.tsx
new file mode 100644
index 0000000..e2993e3
--- /dev/null
+++ b/components/motion/StoryReveal.tsx
@@ -0,0 +1,75 @@
+'use client'
+
+import { ElementType, ReactNode, Ref, useEffect, useRef, useState } from 'react'
+import { cn } from '@/lib/utils'
+
+interface StoryRevealProps {
+  children: ReactNode
+  className?: string
+  as?: keyof JSX.IntrinsicElements
+  delayMs?: number
+}
+
+export function StoryReveal({
+  children,
+  className,
+  as = 'div',
+  delayMs = 0
+}: StoryRevealProps) {
+  const Component = as as ElementType
+  const ref = useRef<HTMLElement | null>(null)
+  const [isVisible, setIsVisible] = useState(false)
+  const [reduceMotion, setReduceMotion] = useState(false)
+
+  useEffect(() => {
+    const media = window.matchMedia('(prefers-reduced-motion: reduce)')
+    const prefersReduced = media.matches
+    setReduceMotion(prefersReduced)
+
+    if (prefersReduced) {
+      setIsVisible(true)
+      return
+    }
+
+    const node = ref.current
+    if (!node) return
+
+    const observer = new IntersectionObserver(
+      (entries) => {
+        entries.forEach((entry) => {
+          if (entry.isIntersecting) {
+            setIsVisible(true)
+            observer.unobserve(entry.target)
+          }
+        })
+      },
+      { threshold: 0.15, rootMargin: '0px 0px -10% 0px' }
+    )
+
+    observer.observe(node)
+
+    return () => observer.disconnect()
+  }, [])
+
+  const revealClasses = reduceMotion
+    ? 'opacity-100 translate-y-0'
+    : isVisible
+      ? 'opacity-100 translate-y-0 transition-all duration-200 ease-out'
+      : 'opacity-0 translate-y-3 transition-all duration-200 ease-out'
+
+  return (
+    <Component
+      ref={ref as Ref<HTMLElement>}
+      className={cn('transform-gpu', revealClasses, className)}
+      style={
+        reduceMotion
+          ? undefined
+          : {
+              transitionDelay: `${delayMs}ms`
+            }
+      }
+    >
+      {children}
+    </Component>
+  )
+}
-- 
2.43.0

